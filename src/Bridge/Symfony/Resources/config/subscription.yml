services:
    overblog_graphql_subscription.publisher:
        class: Symfony\Component\Mercure\Publisher
        arguments:
            - ~
            - '@overblog_graphql_subscription.jwt_publish_provider'

    Overblog\GraphQLSubscription\RealtimeNotifier:
        arguments:
            - '@overblog_graphql_subscription.publisher'
            - '@Overblog\GraphQLSubscription\Storage\SubscribeStorageInterface'
            - ~
            - ~
            - '@?logger'

    Overblog\GraphQLSubscription\Bridge\Symfony\EventListener\SpoolNotificationsHandler:
        arguments:
            - '@Overblog\GraphQLSubscription\RealtimeNotifier'
        tags:
            - {name: kernel.event_listener, event: kernel.terminate, method: onKernelTerminate}

    Overblog\GraphQLSubscription\Bridge\Symfony\Action\SubscriptionAction:
        arguments:
            - '@overblog_graphql_subscription.jwt_subscribe_provider'
            - ~
        tags: ['controller.service_arguments']
